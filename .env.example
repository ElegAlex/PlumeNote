# ===========================================
# PlumeNote - Variables d'environnement
# ===========================================
# Copier ce fichier en .env et adapter les valeurs

# ----- Base de données PostgreSQL -----
POSTGRES_USER=plumenote
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=plumenote
DATABASE_URL=postgresql://plumenote:your_secure_password_here@localhost:5432/plumenote

# ----- Redis -----
REDIS_URL=redis://localhost:6379

# ----- JWT Authentication -----
# Générer avec: openssl rand -hex 32 (IMPORTANT: utiliser -hex, pas -base64)
JWT_SECRET=your_jwt_secret_here_min_32_chars
JWT_EXPIRES_IN=8h

# ----- LDAP Configuration (optionnel) -----
LDAP_ENABLED=false
LDAP_URL=ldap://localhost:389
LDAP_BIND_DN=cn=admin,dc=plumenote,dc=local
LDAP_BIND_PASSWORD=admin
LDAP_SEARCH_BASE=dc=plumenote,dc=local
LDAP_SEARCH_FILTER=(uid={{username}})

# ----- Application -----
NODE_ENV=development
API_PORT=3001
YJS_PORT=1234
WEB_PORT=3000

# URLs publiques
API_URL=http://localhost:3001
YJS_URL=ws://localhost:1234
WEB_URL=http://localhost:3000

# ----- Sécurité -----
# Rate limiting - Configuration différenciée
RATE_LIMIT_ENABLED=true
# Routes publiques (non authentifiées)
RATE_LIMIT_PUBLIC_MAX=100
RATE_LIMIT_PUBLIC_WINDOW=1 minute
# Routes authentifiées - lecture (GET, HEAD, OPTIONS)
RATE_LIMIT_AUTH_READ_MAX=10000
RATE_LIMIT_AUTH_READ_WINDOW=1 minute
# Routes authentifiées - écriture (POST, PUT, PATCH, DELETE)
RATE_LIMIT_AUTH_WRITE_MAX=1000
RATE_LIMIT_AUTH_WRITE_WINDOW=1 minute
# Routes d'authentification (protection brute force)
RATE_LIMIT_AUTH_MAX=10
RATE_LIMIT_AUTH_WINDOW=1 minute

# Session
SESSION_INACTIVITY_TIMEOUT_MS=1800000

# ----- Stockage fichiers -----
UPLOAD_DIR=./uploads
MAX_FILE_SIZE_MB=50
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,webp,svg,pdf,docx,xlsx,pptx,zip,txt

# ----- Backup -----
BACKUP_ENABLED=true
BACKUP_CRON=0 2 * * *
BACKUP_RETENTION_DAYS=30

# ----- Logs -----
LOG_LEVEL=debug
LOG_FORMAT=pretty

# ----- PGAdmin (dev only) -----
PGADMIN_EMAIL=admin@plumenote.local
PGADMIN_PASSWORD=admin
